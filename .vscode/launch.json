{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "sft",
            "type": "python",
            "request": "launch",
            "program": "model/sft.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--model_path=meta-llama/Llama-2-7b-hf",
                "--tokenizer_path=meta-llama/Llama-2-7b-hf",
                "--learning_rate=1e-4",
                "--test_size=0.1",
                "--lr_scheduler_type=cosine",
                "--warmup_steps=50",
                "--weight_decay=0.05",
                "--optimizer_type=paged_adamw_32bit",
                "--per_device_train_batch_size=1",
                "--per_device_eval_batch_size=1",
                "--gradient_accumulation_steps=2",
                "--gradient_checkpointing=False",
                "--lora_alpha=32",
                "--lora_dropout=0.05",
                "--lora_r=8",
                "--max_steps=100",
                "--logging_steps=5",
                "--save_steps=50",
                "--eval_steps=50",
                "--data_path=././data/itineraries.json",
                "--output_dir=././models/sft",
                "--log_freq=1",
                "--sanity_check=False",
                "--report_to=tensorboard"
            ]
        },
        {
            "name": "dpo",
            "type": "python",
            "request": "launch",
            "program": "model/dpo.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--beta=0.1",
                "--model_path=experiments/sft/final_merged_checkpoint",
                "--tokenizer_path=././models/sft/final_checkpoint",
                "--learning_rate=5e-4",
                "--test_size=0.1",
                "--lr_scheduler_type=cosine",
                "--warmup_steps=100",
                "--weight_decay=0.05",
                "--optimizer_type=paged_adamw_32bit",
                "--per_device_train_batch_size=1",
                "--per_device_eval_batch_size=1",
                "--gradient_accumulation_steps=2",
                "--gradient_checkpointing=True",
                "--lora_alpha=16",
                "--lora_dropout=0.05",
                "--lora_r=8",
                "--max_prompt_length=1024",
                "--max_length=1024",
                "--max_steps=300",
                "--logging_steps=1",
                "--save_steps=50",
                "--eval_steps=10",
                "--data_path=././data/itineraries.json",
                "--output_dir=././models/dpo/beta_0.1_4",
                "--log_freq=1",
                "--sanity_check=False",
                "--report_to=tensorboard",
                "--ignore_bias_buffers=False"
            ]
        },
        {
            "name": "generate_dataset",
            "type": "python",
            "request": "launch",
            "program": "utils/generate_dataset.py",
            "console": "integratedTerminal",
            "justMyCode": true,
        }
    ]
}